{% extends 'base.html' %}

{% block title %}Add new disease{% endblock %}


{% block content %}

{% if message %}
    <h3 style="color: red;" align="center">{{ message }}</h3>
{% endif %}

<form action="" method="POST">
    {% csrf_token%}

    <div class="mb-3">
        <label for="name" class="form-label"><b>Disease:</b></label>
        <input type="text" maxlength="255" class="form-control" id="name" name="name" required>
    </div>

    <div class="mb-3">
        <label for="description" class="form-label"><b>Description:</b></label>
        <textarea class="form-control" id="description" name="description" rows="5" required></textarea>
    </div>

    <div class="mb-3">
        <label class="form-label"><b>Geographical Area:</b></label><br>
        {% if geographical_areas %}
            <table class="search-diseases-table">
                {% for area in geographical_areas %}
                    {% if forloop.counter0|divisibleby:6 %}
                        <tr>
                    {% endif %}
                        <td>
                            <input type="checkbox" id="geographical_areas" name="geographical_areas" value="{{ area.pk }}">
                            <label for="geographical_areas">{{ area.area }}</label><br>
                        </td>
                    {% if forloop.counter|divisibleby:6 %}
                        </tr>
                    {% endif %}
                {% endfor %}
            </table>
        {% endif %}
    </div>

    <div class="mb-3">
        <label class="form-label"><b>Affected organs:</b></label><br>
            {% if organs %}
                <table class="search-diseases-table">
                    {% for organ in organs %}
                        {% if forloop.counter0|divisibleby:6 %}
                            <tr>
                        {% endif %}
                            <td>
                                <input type="checkbox" id="affected_organs" name="affected_organs" value="{{ organ.pk }}">
                                <label for="affected_organs">{{ organ.name }}</label><br>
                            </td>
                        {% if forloop.counter|divisibleby:6 %}
                            </tr>
                        {% endif %}
                    {% endfor %}
                </table>
            {% else %}
                <p>No organs found.</p>
            {% endif %}
    </div>

    <div class="mb-3">
        <label class="form-label"><b>Symptoms:</b></label><br>
        <input id="myInput2" type="text" placeholder="search symptom.."><br><br>
        {% if symptoms %}
            <ul id="myList2">
                {% for symptom in symptoms %}
                    <li style="list-style:none;">
                        <input type="checkbox" class="input-symptoms" id="symptoms" name="symptoms" value="{{ symptom.pk }}">
                        <label for="symptoms">{{ symptom.name }}</label>
                        (<i>frequency:</i>
                            <select class="select-frequency" name="symptom_frequency" id="select-frequency">
                                {% for symptom_frequency in symptom_frequency_choices %}
                                    <option value="{{ symptom_frequency.0 }}">{{ symptom_frequency.1 }}</option>
                                {% endfor %}
                            </select>
                        )<br>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No symptoms found.</p>
        {% endif %}
    </div>

    <div class="mb-3">
        <label class="form-label"><b>Treatment:</b></label><br>
        <input id="myInput4" type="text" placeholder="search treatment.."><br><br>
        <ul id="myList4">
            {% for tr in treatment %}
                <li style="list-style:none;">
                    <input type="checkbox" id="treatment" name="treatment"
                           value="{{ tr.pk }}">
                    <label for="treatment">{{ tr.treatment }}</label><br>
                </li>
            {% endfor %}
        </ul>
    </div>

    <input type="submit" id="btn-add-disease" value="Add">
</form>

{% endblock %}
